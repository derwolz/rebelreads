11:29:04 PM [express] serving on port 5000
Scheduling popular books calculation in 30 minutes
11:29:04 PM [express] Scheduler started for periodic tasks including popular books calculation
Column 'featured' already exists
Column 'report_status' already exists
Table 'ad_impressions' already exists
Table 'author_analytics' already exists
Table 'author_page_views' already exists
Table 'author_form_analytics' already exists
Table 'beta_keys' already exists
Table 'beta_key_usage' already exists
Adding 'criteria_weights' column to rating_preferences table...
Column 'criteria_weights' added successfully
Individual rating metrics columns already exist
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Removing criteria_weights column...
criteria_weights column removed successfully
criteria_order column has already been removed
Table 'genre_taxonomies' already exists
Table 'book_genre_taxonomies' already exists
Column 'favorite_genres' doesn't exist or has already been removed
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Table 'user_preference_taxonomies' doesn't exist or has already been removed
Table 'user_taxonomy_items' doesn't exist or has already been removed
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Table 'user_taxonomy_preferences' doesn't exist or has already been removed
Creating 'user_genre_preferences' table...
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Table 'user_genre_preferences' created successfully
Adding 'content_views' column to user_genre_preferences table...
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Column 'content_views' added successfully and data migrated
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Table 'user_genre_views' already exists
Table 'view_genres' already exists
Migrating data from 'user_genre_preferences' to new tables...
Data migration completed
Dropping 'user_genre_preferences' table...
Table 'user_genre_preferences' dropped successfully
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Table 'homepage_layouts' already exists
Checking for book_images table...
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Table 'book_images' already exists
Migrating cover_url data to book_images table...
cover_url column no longer exists, skipping migration
Checking for cover_url column in books table...
cover_url column does not exist, skipping removal
Migrations completed
Database migrations completed successfully
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
Error: Failed to deserialize user out of session
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:359:19)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:67:5)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)